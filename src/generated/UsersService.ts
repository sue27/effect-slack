/**
 * Generated Slack Users Service
 * DO NOT EDIT - This file is auto-generated by scripts/generate-services.ts
 */

import { Effect } from "effect"
import type {
  UsersConversationsArguments,
  UsersConversationsResponse,
  UsersDeletePhotoArguments,
  UsersDeletePhotoResponse,
  UsersDiscoverableContactsLookupArguments,
  UsersDiscoverableContactsLookupResponse,
  UsersGetPresenceArguments,
  UsersGetPresenceResponse,
  UsersIdentityArguments,
  UsersIdentityResponse,
  UsersInfoArguments,
  UsersInfoResponse,
  UsersListArguments,
  UsersListResponse,
  UsersLookupByEmailArguments,
  UsersLookupByEmailResponse,
  UsersProfileGetArguments,
  UsersProfileGetResponse,
  UsersProfileSetArguments,
  UsersProfileSetResponse,
  UsersSetPhotoArguments,
  UsersSetPhotoResponse,
  UsersSetPresenceArguments,
  UsersSetPresenceResponse
} from "@slack/web-api"
import { SlackClient } from "../SlackClient.js"
import { mapSlackError, annotateSpanWithError, type SlackError } from "../internal/errors.js"

export class UsersService extends Effect.Service<UsersService>()("effect-slack/UsersService", {
  effect: Effect.gen(function* () {
    const client = yield* SlackClient

    /**
     * List conversations the calling user may access.
     */
    const conversations = (
      args: UsersConversationsArguments
    ): Effect.Effect<UsersConversationsResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.users.conversations(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsersService.conversations", {
          attributes: { "slack.method": "users.conversations" }
        })
      )

    /**
     * Delete the user profile photo.
     */
    const deletePhoto = (
      args: UsersDeletePhotoArguments
    ): Effect.Effect<UsersDeletePhotoResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.users.deletePhoto(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsersService.deletePhoto", {
          attributes: { "slack.method": "users.deletePhoto" }
        })
      )

    /**
     * Gets user presence information.
     */
    const getPresence = (
      args: UsersGetPresenceArguments
    ): Effect.Effect<UsersGetPresenceResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.users.getPresence(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsersService.getPresence", {
          attributes: { "slack.method": "users.getPresence" }
        })
      )

    /**
     * Get a user's identity.
     */
    const identity = (
      args: UsersIdentityArguments
    ): Effect.Effect<UsersIdentityResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.users.identity(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsersService.identity", {
          attributes: { "slack.method": "users.identity" }
        })
      )

    /**
     * Gets information about a user.
     */
    const info = (
      args: UsersInfoArguments
    ): Effect.Effect<UsersInfoResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.users.info(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsersService.info", {
          attributes: { "slack.method": "users.info" }
        })
      )

    /**
     * Lists all users in a Slack team.
     */
    const list = (
      args: UsersListArguments
    ): Effect.Effect<UsersListResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.users.list(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsersService.list", {
          attributes: { "slack.method": "users.list" }
        })
      )

    /**
     * Find a user with an email address.
     */
    const lookupByEmail = (
      args: UsersLookupByEmailArguments
    ): Effect.Effect<UsersLookupByEmailResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.users.lookupByEmail(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsersService.lookupByEmail", {
          attributes: { "slack.method": "users.lookupByEmail" }
        })
      )

    /**
     * Set the user profile photo.
     */
    const setPhoto = (
      args: UsersSetPhotoArguments
    ): Effect.Effect<UsersSetPhotoResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.users.setPhoto(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsersService.setPhoto", {
          attributes: { "slack.method": "users.setPhoto" }
        })
      )

    /**
     * Manually sets user presence.
     */
    const setPresence = (
      args: UsersSetPresenceArguments
    ): Effect.Effect<UsersSetPresenceResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.users.setPresence(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsersService.setPresence", {
          attributes: { "slack.method": "users.setPresence" }
        })
      )

    /**
     * Lookup an email address to see if someone is on Slack.
     */
    const DiscoverableContactsLookup = (
      args: UsersDiscoverableContactsLookupArguments
    ): Effect.Effect<UsersDiscoverableContactsLookupResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.users.discoverableContacts.lookup(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsersService.discoverableContacts.lookup", {
          attributes: { "slack.method": "users.discoverableContacts.lookup" }
        })
      )

    /**
     * Retrieve a user's profile information, including their custom status.
     */
    const ProfileGet = (
      args: UsersProfileGetArguments
    ): Effect.Effect<UsersProfileGetResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.users.profile.get(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsersService.profile.get", {
          attributes: { "slack.method": "users.profile.get" }
        })
      )

    /**
     * Set a user's profile information, including custom status.
     */
    const ProfileSet = (
      args: UsersProfileSetArguments
    ): Effect.Effect<UsersProfileSetResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.users.profile.set(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsersService.profile.set", {
          attributes: { "slack.method": "users.profile.set" }
        })
      )

    return {
      conversations,
      deletePhoto,
      getPresence,
      identity,
      info,
      list,
      lookupByEmail,
      setPhoto,
      setPresence,
      discoverableContacts: {
        lookup: DiscoverableContactsLookup
      },
      profile: {
        get: ProfileGet,
        set: ProfileSet
      }
    } as const
  }),
  dependencies: [SlackClient.Default]
}) {}
