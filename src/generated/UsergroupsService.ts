/**
 * Generated Slack Usergroups Service
 * DO NOT EDIT - This file is auto-generated by scripts/generate-services.ts
 */

import { Effect } from "effect"
import type {
  UsergroupsCreateArguments,
  UsergroupsCreateResponse,
  UsergroupsDisableArguments,
  UsergroupsDisableResponse,
  UsergroupsEnableArguments,
  UsergroupsEnableResponse,
  UsergroupsListArguments,
  UsergroupsListResponse,
  UsergroupsUpdateArguments,
  UsergroupsUpdateResponse,
  UsergroupsUsersListArguments,
  UsergroupsUsersListResponse,
  UsergroupsUsersUpdateArguments,
  UsergroupsUsersUpdateResponse
} from "@slack/web-api"
import { SlackClient } from "../SlackClient.js"
import { mapSlackError, annotateSpanWithError, type SlackError } from "../internal/errors.js"

export class UsergroupsService extends Effect.Service<UsergroupsService>()("effect-slack/UsergroupsService", {
  effect: Effect.gen(function* () {
    const client = yield* SlackClient

    /**
     * Create a User Group.
     */
    const create = (
      args: UsergroupsCreateArguments
    ): Effect.Effect<UsergroupsCreateResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.usergroups.create(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsergroupsService.create", {
          attributes: { "slack.method": "usergroups.create" }
        })
      )

    /**
     * Disable an existing User Group.
     */
    const disable = (
      args: UsergroupsDisableArguments
    ): Effect.Effect<UsergroupsDisableResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.usergroups.disable(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsergroupsService.disable", {
          attributes: { "slack.method": "usergroups.disable" }
        })
      )

    /**
     * Enable an existing User Group.
     */
    const enable = (
      args: UsergroupsEnableArguments
    ): Effect.Effect<UsergroupsEnableResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.usergroups.enable(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsergroupsService.enable", {
          attributes: { "slack.method": "usergroups.enable" }
        })
      )

    /**
     * List all User Groups for a team.
     */
    const list = (
      args?: UsergroupsListArguments
    ): Effect.Effect<UsergroupsListResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.usergroups.list(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsergroupsService.list", {
          attributes: { "slack.method": "usergroups.list" }
        })
      )

    /**
     * Update an existing User Group.
     */
    const update = (
      args: UsergroupsUpdateArguments
    ): Effect.Effect<UsergroupsUpdateResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.usergroups.update(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsergroupsService.update", {
          attributes: { "slack.method": "usergroups.update" }
        })
      )

    /**
     * List all users in a User Group.
     */
    const UsersList = (
      args: UsergroupsUsersListArguments
    ): Effect.Effect<UsergroupsUsersListResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.usergroups.users.list(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsergroupsService.users.list", {
          attributes: { "slack.method": "usergroups.users.list" }
        })
      )

    /**
     * Update the list of users in a User Group.
     */
    const UsersUpdate = (
      args: UsergroupsUsersUpdateArguments
    ): Effect.Effect<UsergroupsUsersUpdateResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.usergroups.users.update(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("UsergroupsService.users.update", {
          attributes: { "slack.method": "usergroups.users.update" }
        })
      )

    return {
      create,
      disable,
      enable,
      list,
      update,
      users: {
        list: UsersList,
        update: UsersUpdate
      }
    } as const
  }),
  dependencies: [SlackClient.Default]
}) {}
