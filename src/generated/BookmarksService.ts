/**
 * Generated Slack Bookmarks Service
 * DO NOT EDIT - This file is auto-generated by scripts/generate-services.ts
 */

import { Effect } from "effect"
import type {
  BookmarksAddArguments,
  BookmarksAddResponse,
  BookmarksEditArguments,
  BookmarksEditResponse,
  BookmarksListArguments,
  BookmarksListResponse,
  BookmarksRemoveArguments,
  BookmarksRemoveResponse
} from "@slack/web-api"
import { SlackClient } from "../SlackClient.js"
import { mapSlackError, annotateSpanWithError, type SlackError } from "../internal/errors.js"

export class BookmarksService extends Effect.Service<BookmarksService>()("effect-slack/BookmarksService", {
  effect: Effect.gen(function* () {
    const client = yield* SlackClient

    /**
     * Add bookmark to a channel.
     */
    const add = (
      args: BookmarksAddArguments
    ): Effect.Effect<BookmarksAddResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.bookmarks.add(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("BookmarksService.add", {
          attributes: { "slack.method": "bookmarks.add" }
        })
      )

    /**
     * Edit bookmark.
     */
    const edit = (
      args: BookmarksEditArguments
    ): Effect.Effect<BookmarksEditResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.bookmarks.edit(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("BookmarksService.edit", {
          attributes: { "slack.method": "bookmarks.edit" }
        })
      )

    /**
     * List bookmarks for a channel.
     */
    const list = (
      args: BookmarksListArguments
    ): Effect.Effect<BookmarksListResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.bookmarks.list(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("BookmarksService.list", {
          attributes: { "slack.method": "bookmarks.list" }
        })
      )

    /**
     * Remove bookmark from a channel.
     */
    const remove = (
      args: BookmarksRemoveArguments
    ): Effect.Effect<BookmarksRemoveResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.bookmarks.remove(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("BookmarksService.remove", {
          attributes: { "slack.method": "bookmarks.remove" }
        })
      )

    return {
      add,
      edit,
      list,
      remove
    } as const
  }),
  dependencies: [SlackClient.Default]
}) {}
