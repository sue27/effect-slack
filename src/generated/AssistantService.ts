/**
 * Generated Slack Assistant Service
 * DO NOT EDIT - This file is auto-generated by scripts/generate-services.ts
 */

import { Effect } from "effect"
import type {
  AssistantThreadsSetStatusArguments,
  AssistantThreadsSetStatusResponse,
  AssistantThreadsSetSuggestedPromptsArguments,
  AssistantThreadsSetSuggestedPromptsResponse,
  AssistantThreadsSetTitleArguments,
  AssistantThreadsSetTitleResponse
} from "@slack/web-api"
import { SlackClient } from "../SlackClient.js"
import { mapSlackError, annotateSpanWithError, type SlackError } from "../internal/errors.js"

export class AssistantService extends Effect.Service<AssistantService>()("effect-slack/AssistantService", {
  effect: Effect.gen(function* () {
    const client = yield* SlackClient

    /**
     * Set loading status to indicate that the app is building a response.
     */
    const ThreadsSetStatus = (
      args: AssistantThreadsSetStatusArguments
    ): Effect.Effect<AssistantThreadsSetStatusResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.assistant.threads.setStatus(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("AssistantService.threads.setStatus", {
          attributes: { "slack.method": "assistant.threads.setStatus" }
        })
      )

    /**
     * Set suggested prompts for the user. Can suggest up to four prompts.
     */
    const ThreadsSetSuggestedPrompts = (
      args: AssistantThreadsSetSuggestedPromptsArguments
    ): Effect.Effect<AssistantThreadsSetSuggestedPromptsResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.assistant.threads.setSuggestedPrompts(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("AssistantService.threads.setSuggestedPrompts", {
          attributes: { "slack.method": "assistant.threads.setSuggestedPrompts" }
        })
      )

    /**
     * Set the title of the thread. This is shown when a user views the app's chat history.
     */
    const ThreadsSetTitle = (
      args: AssistantThreadsSetTitleArguments
    ): Effect.Effect<AssistantThreadsSetTitleResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.assistant.threads.setTitle(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("AssistantService.threads.setTitle", {
          attributes: { "slack.method": "assistant.threads.setTitle" }
        })
      )

    return {
      threads: {
        setStatus: ThreadsSetStatus,
        setSuggestedPrompts: ThreadsSetSuggestedPrompts,
        setTitle: ThreadsSetTitle
      }
    } as const
  }),
  dependencies: [SlackClient.Default]
}) {}
