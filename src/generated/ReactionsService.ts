/**
 * Generated Slack Reactions Service
 * DO NOT EDIT - This file is auto-generated by scripts/generate-services.ts
 */

import { Effect } from "effect"
import type {
  ReactionsAddArguments,
  ReactionsAddResponse,
  ReactionsGetArguments,
  ReactionsGetResponse,
  ReactionsListArguments,
  ReactionsListResponse,
  ReactionsRemoveArguments,
  ReactionsRemoveResponse
} from "@slack/web-api"
import { SlackClient } from "../SlackClient.js"
import { mapSlackError, annotateSpanWithError, type SlackError } from "../internal/errors.js"

export class ReactionsService extends Effect.Service<ReactionsService>()("effect-slack/ReactionsService", {
  effect: Effect.gen(function* () {
    const client = yield* SlackClient

    /**
     * Adds a reaction to an item.
     */
    const add = (
      args: ReactionsAddArguments
    ): Effect.Effect<ReactionsAddResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.reactions.add(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("ReactionsService.add", {
          attributes: { "slack.method": "reactions.add" }
        })
      )

    /**
     * Gets reactions for an item.
     */
    const get = (
      args: ReactionsGetArguments
    ): Effect.Effect<ReactionsGetResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.reactions.get(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("ReactionsService.get", {
          attributes: { "slack.method": "reactions.get" }
        })
      )

    /**
     * List reactions made by a user.
     */
    const list = (
      args?: ReactionsListArguments
    ): Effect.Effect<ReactionsListResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.reactions.list(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("ReactionsService.list", {
          attributes: { "slack.method": "reactions.list" }
        })
      )

    /**
     * Removes a reaction from an item.
     */
    const remove = (
      args: ReactionsRemoveArguments
    ): Effect.Effect<ReactionsRemoveResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.reactions.remove(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("ReactionsService.remove", {
          attributes: { "slack.method": "reactions.remove" }
        })
      )

    return {
      add,
      get,
      list,
      remove
    } as const
  }),
  dependencies: [SlackClient.Default]
}) {}
