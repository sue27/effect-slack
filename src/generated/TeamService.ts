/**
 * Generated Slack Team Service
 * DO NOT EDIT - This file is auto-generated by scripts/generate-services.ts
 */

import { Effect } from "effect"
import type {
  TeamAccessLogsArguments,
  TeamAccessLogsResponse,
  TeamBillableInfoArguments,
  TeamBillableInfoResponse,
  TeamBillingInfoArguments,
  TeamBillingInfoResponse,
  TeamExternalTeamsDisconnectArguments,
  TeamExternalTeamsDisconnectResponse,
  TeamExternalTeamsListArguments,
  TeamExternalTeamsListResponse,
  TeamInfoArguments,
  TeamInfoResponse,
  TeamIntegrationLogsArguments,
  TeamIntegrationLogsResponse,
  TeamPreferencesListArguments,
  TeamPreferencesListResponse,
  TeamProfileGetArguments,
  TeamProfileGetResponse
} from "@slack/web-api"
import { SlackClient } from "../SlackClient.js"
import { mapSlackError, annotateSpanWithError, type SlackError } from "../internal/errors.js"

export class TeamService extends Effect.Service<TeamService>()("effect-slack/TeamService", {
  effect: Effect.gen(function* () {
    const client = yield* SlackClient

    /**
     * Gets the access logs for the current team.
     */
    const accessLogs = (
      args?: TeamAccessLogsArguments
    ): Effect.Effect<TeamAccessLogsResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.team.accessLogs(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("TeamService.accessLogs", {
          attributes: { "slack.method": "team.accessLogs" }
        })
      )

    /**
     * Gets billable users information for the current team.
     */
    const billableInfo = (
      args?: TeamBillableInfoArguments
    ): Effect.Effect<TeamBillableInfoResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.team.billableInfo(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("TeamService.billableInfo", {
          attributes: { "slack.method": "team.billableInfo" }
        })
      )

    /**
     * Gets information about the current team.
     */
    const info = (
      args?: TeamInfoArguments
    ): Effect.Effect<TeamInfoResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.team.info(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("TeamService.info", {
          attributes: { "slack.method": "team.info" }
        })
      )

    /**
     * Gets the integration logs for the current team.
     */
    const integrationLogs = (
      args?: TeamIntegrationLogsArguments
    ): Effect.Effect<TeamIntegrationLogsResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.team.integrationLogs(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("TeamService.integrationLogs", {
          attributes: { "slack.method": "team.integrationLogs" }
        })
      )

    /**
     * Reads a workspace's billing plan information.
     */
    const BillingInfo = (
      args: TeamBillingInfoArguments
    ): Effect.Effect<TeamBillingInfoResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.team.billing.info(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("TeamService.billing.info", {
          attributes: { "slack.method": "team.billing.info" }
        })
      )

    /**
     * Disconnect an external organization.
     */
    const ExternalTeamsDisconnect = (
      args: TeamExternalTeamsDisconnectArguments
    ): Effect.Effect<TeamExternalTeamsDisconnectResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.team.externalTeams.disconnect(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("TeamService.externalTeams.disconnect", {
          attributes: { "slack.method": "team.externalTeams.disconnect" }
        })
      )

    /**
     * Returns a list of all the external teams connected and details about the connection.
     */
    const ExternalTeamsList = (
      args: TeamExternalTeamsListArguments
    ): Effect.Effect<TeamExternalTeamsListResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.team.externalTeams.list(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("TeamService.externalTeams.list", {
          attributes: { "slack.method": "team.externalTeams.list" }
        })
      )

    /**
     * Retrieve a list of a workspace's team preferences.
     */
    const PreferencesList = (
      args?: TeamPreferencesListArguments
    ): Effect.Effect<TeamPreferencesListResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.team.preferences.list(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("TeamService.preferences.list", {
          attributes: { "slack.method": "team.preferences.list" }
        })
      )

    /**
     * Retrieve a team's profile.
     */
    const ProfileGet = (
      args?: TeamProfileGetArguments
    ): Effect.Effect<TeamProfileGetResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.team.profile.get(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("TeamService.profile.get", {
          attributes: { "slack.method": "team.profile.get" }
        })
      )

    return {
      accessLogs,
      billableInfo,
      info,
      integrationLogs,
      billing: {
        info: BillingInfo
      },
      externalTeams: {
        disconnect: ExternalTeamsDisconnect,
        list: ExternalTeamsList
      },
      preferences: {
        list: PreferencesList
      },
      profile: {
        get: ProfileGet
      }
    } as const
  }),
  dependencies: [SlackClient.Default]
}) {}
