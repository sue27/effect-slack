/**
 * Generated Slack Canvases Service
 * DO NOT EDIT - This file is auto-generated by scripts/generate-services.ts
 */

import { Effect } from "effect"
import type {
  CanvasesAccessDeleteArguments,
  CanvasesAccessDeleteResponse,
  CanvasesAccessSetArguments,
  CanvasesAccessSetResponse,
  CanvasesCreateArguments,
  CanvasesCreateResponse,
  CanvasesDeleteArguments,
  CanvasesDeleteResponse,
  CanvasesEditArguments,
  CanvasesEditResponse,
  CanvasesSectionsLookupArguments,
  CanvasesSectionsLookupResponse
} from "@slack/web-api"
import { SlackClient } from "../SlackClient.js"
import { mapSlackError, annotateSpanWithError, type SlackError } from "../internal/errors.js"

export class CanvasesService extends Effect.Service<CanvasesService>()("effect-slack/CanvasesService", {
  effect: Effect.gen(function* () {
    const client = yield* SlackClient

    /**
     * Create Canvas for a user.
     */
    const create = (
      args?: CanvasesCreateArguments
    ): Effect.Effect<CanvasesCreateResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.canvases.create(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("CanvasesService.create", {
          attributes: { "slack.method": "canvases.create" }
        })
      )

    /**
     * Deletes a canvas.
     */
    const delete_ = (
      args: CanvasesDeleteArguments
    ): Effect.Effect<CanvasesDeleteResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.canvases.delete(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("CanvasesService.delete_", {
          attributes: { "slack.method": "canvases.delete" }
        })
      )

    /**
     * Update an existing canvas.
     */
    const edit = (
      args: CanvasesEditArguments
    ): Effect.Effect<CanvasesEditResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.canvases.edit(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("CanvasesService.edit", {
          attributes: { "slack.method": "canvases.edit" }
        })
      )

    /**
     * Remove access to a canvas for specified entities.
     */
    const AccessDelete_ = (
      args: CanvasesAccessDeleteArguments
    ): Effect.Effect<CanvasesAccessDeleteResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.canvases.access.delete(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("CanvasesService.access.delete_", {
          attributes: { "slack.method": "canvases.access.delete" }
        })
      )

    /**
     * Sets the access level to a canvas for specified entities.
     */
    const AccessSet = (
      args: CanvasesAccessSetArguments
    ): Effect.Effect<CanvasesAccessSetResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.canvases.access.set(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("CanvasesService.access.set", {
          attributes: { "slack.method": "canvases.access.set" }
        })
      )

    /**
     * Find sections matching the provided criteria.
     */
    const SectionsLookup = (
      args: CanvasesSectionsLookupArguments
    ): Effect.Effect<CanvasesSectionsLookupResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.canvases.sections.lookup(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("CanvasesService.sections.lookup", {
          attributes: { "slack.method": "canvases.sections.lookup" }
        })
      )

    return {
      create,
      delete_,
      edit,
      access: {
        delete_: AccessDelete_,
        set: AccessSet
      },
      sections: {
        lookup: SectionsLookup
      }
    } as const
  }),
  dependencies: [SlackClient.Default]
}) {}
