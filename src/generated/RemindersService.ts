/**
 * Generated Slack Reminders Service
 * DO NOT EDIT - This file is auto-generated by scripts/generate-services.ts
 */

import { Effect } from "effect"
import type {
  RemindersAddArguments,
  RemindersAddResponse,
  RemindersCompleteArguments,
  RemindersCompleteResponse,
  RemindersDeleteArguments,
  RemindersDeleteResponse,
  RemindersInfoArguments,
  RemindersInfoResponse,
  RemindersListArguments,
  RemindersListResponse
} from "@slack/web-api"
import { SlackClient } from "../SlackClient.js"
import { mapSlackError, annotateSpanWithError, type SlackError } from "../internal/errors.js"

export class RemindersService extends Effect.Service<RemindersService>()("effect-slack/RemindersService", {
  effect: Effect.gen(function* () {
    const client = yield* SlackClient

    /**
     * Creates a reminder.
     */
    const add = (
      args: RemindersAddArguments
    ): Effect.Effect<RemindersAddResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.reminders.add(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("RemindersService.add", {
          attributes: { "slack.method": "reminders.add" }
        })
      )

    /**
     * Marks a reminder as complete.
     */
    const complete = (
      args: RemindersCompleteArguments
    ): Effect.Effect<RemindersCompleteResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.reminders.complete(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("RemindersService.complete", {
          attributes: { "slack.method": "reminders.complete" }
        })
      )

    /**
     * Deletes a reminder.
     */
    const delete_ = (
      args: RemindersDeleteArguments
    ): Effect.Effect<RemindersDeleteResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.reminders.delete(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("RemindersService.delete_", {
          attributes: { "slack.method": "reminders.delete" }
        })
      )

    /**
     * Gets information about a reminder.
     */
    const info = (
      args: RemindersInfoArguments
    ): Effect.Effect<RemindersInfoResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.reminders.info(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("RemindersService.info", {
          attributes: { "slack.method": "reminders.info" }
        })
      )

    /**
     * Lists all reminders created by or for a given user.
     */
    const list = (
      args?: RemindersListArguments
    ): Effect.Effect<RemindersListResponse, SlackError> =>
      Effect.tryPromise({
        try: () => client.reminders.list(args),
        catch: mapSlackError
      }).pipe(
        Effect.tapError(annotateSpanWithError),
        Effect.withSpan("RemindersService.list", {
          attributes: { "slack.method": "reminders.list" }
        })
      )

    return {
      add,
      complete,
      delete_,
      info,
      list
    } as const
  }),
  dependencies: [SlackClient.Default]
}) {}
